class QRCodeGenerator{constructor(){this.currentSize=1000;this.currentFormat='png';this.qrCodeInstance=null;this.logoImage=null;this.currentDotStyle='rounded';this.currentCornerSquareStyle='square';this.currentCornerDotStyle='square';this.counterNamespace='ifdev';this.counterName='qr-download-count';this.counterApiBase='https:this.init();}init(){this.bindEvents();this.generateQR();this.updateSizeDisplay();this.updatePreviewBackground(document.getElementById('transparent-bg').checked);this.loadDownloadCount();}bindEvents(){document.querySelectorAll('[data-type]').forEach(btn=>{btn.addEventListener('click',(e)=>{this.setActiveButton(e.target,'[data-type]');this.updateInputPlaceholder(e.target.dataset.type);});});document.querySelectorAll('[data-style]').forEach(btn=>{btn.addEventListener('click',(e)=>{this.setActiveButton(e.target,'[data-style]');this.currentDotStyle=e.target.dataset.style;this.generateQR();});});document.querySelectorAll('[data-corner]').forEach(btn=>{btn.addEventListener('click',(e)=>{this.setActiveButton(e.target,'[data-corner]');this.currentCornerSquareStyle=e.target.dataset.corner;this.generateQR();});});document.querySelectorAll('[data-corner-dot]').forEach(btn=>{btn.addEventListener('click',(e)=>{this.setActiveButton(e.target,'[data-corner-dot]');this.currentCornerDotStyle=e.target.dataset.cornerDot;this.generateQR();});});document.querySelectorAll('[data-format]').forEach(btn=>{btn.addEventListener('click',(e)=>{this.setActiveButton(e.target,'[data-format]');this.currentFormat=e.target.dataset.format;});});document.querySelectorAll('[data-size]').forEach(btn=>{btn.addEventListener('click',(e)=>{this.setActiveButton(e.target,'[data-size]');this.currentSize=parseInt(e.target.dataset.size);this.updateSizeDisplay();});});document.getElementById('target-url').addEventListener('input',()=>{this.generateQR();});document.getElementById('qr-color').addEventListener('change',(e)=>{document.getElementById('qr-color-text').value=e.target.value;this.generateQR();});document.getElementById('qr-color-text').addEventListener('input',(e)=>{if(this.isValidColor(e.target.value)){document.getElementById('qr-color').value=e.target.value;this.generateQR();}});document.getElementById('bg-color').addEventListener('change',(e)=>{document.getElementById('bg-color-text').value=e.target.value;this.generateQR();});document.getElementById('bg-color-text').addEventListener('input',(e)=>{if(this.isValidColor(e.target.value)){document.getElementById('bg-color').value=e.target.value;this.generateQR();}});document.getElementById('transparent-bg').addEventListener('change',(e)=>{this.updatePreviewBackground(e.target.checked);this.generateQR();});document.querySelector('#transparent-bg + .slider').addEventListener('click',(e)=>{e.preventDefault();const checkbox=document.getElementById('transparent-bg');checkbox.checked=!checkbox.checked;this.updatePreviewBackground(checkbox.checked);checkbox.dispatchEvent(new Event('change'));});document.getElementById('show-logo').addEventListener('change',(e)=>{const logoUpload=document.querySelector('.logo-upload');logoUpload.style.display=e.target.checked ? 'block':'none';this.generateQR();});document.querySelector('#show-logo + .slider').addEventListener('click',(e)=>{e.preventDefault();const checkbox=document.getElementById('show-logo');checkbox.checked=!checkbox.checked;checkbox.dispatchEvent(new Event('change'));});document.querySelectorAll('.btn-upload').forEach(btn=>{btn.addEventListener('click',(e)=>{document.querySelectorAll('.btn-upload').forEach(b=> b.classList.remove('active'));e.target.classList.add('active');const uploadType=e.target.textContent.includes('Upload File')? 'file':'url';this.toggleUploadMethod(uploadType);});});this.setupLogoUploadEvents();this.ensureLogoFileInput();document.querySelector('.btn-download').addEventListener('click',()=>{this.downloadQR();});document.querySelector('.btn-support').addEventListener('click',()=>{window.open('https:});document.querySelector('.btn-fullscreen').addEventListener('click',()=>{this.showFullscreen();});}setActiveButton(clickedBtn,selector){document.querySelectorAll(selector).forEach(btn=>{btn.classList.remove('active');});clickedBtn.classList.add('active');}updateInputPlaceholder(type){const input=document.getElementById('target-url');const label=input.previousElementSibling;switch(type){case 'url':input.placeholder='https:label.textContent='Target URL:';input.value='';break;case 'text':input.placeholder='Enter your text here';label.textContent='Text Content:';input.value='';break;case 'phone':input.placeholder='+66 12 345 6789';label.textContent='Phone Number:';input.value='';break;}}updateSizeDisplay(){document.querySelector('.size-display').textContent=`${this.currentSize}√ó${this.currentSize}px`;}isValidColor(color){return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);}generateQR(){const text=document.getElementById('target-url').value || 'https:const qrContainer=document.getElementById('qr-code');const qrColor=document.getElementById('qr-color').value;const bgColor=document.getElementById('bg-color').value;const isTransparent=document.getElementById('transparent-bg').checked;const showLogo=document.getElementById('show-logo').checked;try{qrContainer.innerHTML='';if(typeof QRCodeStyling==='undefined'){qrContainer.innerHTML='<p style="color:#ff6b6b;text-align:center;padding:20px;">QR Code library is loading...</p>';return;}const options={width:300,height:300,type:"canvas",data:text,image:showLogo && this.logoImage ? this.logoImage:undefined,margin:10,qrOptions:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"M"},imageOptions:{hideBackgroundDots:true,imageSize:0.4,margin:5,crossOrigin:"anonymous"},dotsOptions:{color:qrColor,type:this.getDotStyleType()},backgroundOptions:{color:isTransparent ? "transparent":bgColor},cornersSquareOptions:{color:qrColor,type:this.getCornerSquareStyleType()},cornersDotOptions:{color:qrColor,type:this.getCornerDotStyleType()}};this.qrCodeInstance=new QRCodeStyling(options);this.qrCodeInstance.append(qrContainer);}catch(error){console.error('Error generating QR code:',error);qrContainer.innerHTML='<p style="color:#ff6b6b;text-align:center;padding:20px;">Error generating QR code</p>';}}getDotStyleType(){switch(this.currentDotStyle){case 'rounded':return 'rounded';case 'dots':return 'dots';case 'classy':return 'classy';case 'classy-rounded':return 'classy-rounded';case 'square':return 'square';case 'extra-rounded':return 'extra-rounded';default:return 'square';}}getCornerSquareStyleType(){switch(this.currentCornerSquareStyle){case 'square':return 'square';case 'extra-rounded':return 'extra-rounded';case 'dot':return 'dot';default:return 'square';}}getCornerDotStyleType(){switch(this.currentCornerDotStyle){case 'square':return 'square';case 'dot':return 'dot';default:return 'square';}}async loadDownloadCount(){try{const response=await fetch(`${this.counterApiBase}/${this.counterNamespace}/${this.counterName}/`);const data=await response.json();if(data && typeof data.count==='number'){this.updateDownloadDisplay(data.count);}else{this.updateDownloadDisplay(139);}}catch(error){console.error('Error loading download count:',error);this.updateDownloadDisplay(139);}}async incrementDownloadCount(){try{const response=await fetch(`${this.counterApiBase}/${this.counterNamespace}/${this.counterName}/up`,{method:'GET'});const data=await response.json();if(data && typeof data.count==='number'){this.updateDownloadDisplay(data.count);return data.count;}}catch(error){console.error('Error incrementing download count:',error);const currentCount=this.getCurrentDisplayCount();const newCount=currentCount + 1;this.updateDownloadDisplay(newCount);return newCount;}}getCurrentDisplayCount(){const statsElement=document.querySelector('.stats strong');if(statsElement){const text=statsElement.textContent.replace(/[,\s]/g,'').replace('times','');return parseInt(text)|| 39139;}return 39139;}updateDownloadDisplay(count){const statsElement=document.querySelector('.stats strong');if(statsElement){statsElement.textContent=count.toLocaleString()+ ' times';}}updatePreviewBackground(isTransparent){const qrPreview=document.querySelector('.qr-preview');if(isTransparent){qrPreview.classList.add('transparent-bg');}else{qrPreview.classList.remove('transparent-bg');}}ensureLogoFileInput(){let logoFileInput=document.getElementById('logo-file');if(!logoFileInput){logoFileInput=document.createElement('input');logoFileInput.type='file';logoFileInput.id='logo-file';logoFileInput.accept='image/*';logoFileInput.style.display='none';const logoUploadSection=document.querySelector('.logo-upload');if(logoUploadSection){logoUploadSection.appendChild(logoFileInput);}else{document.body.appendChild(logoFileInput);}logoFileInput.addEventListener('change',(e)=>{if(e.target.files[0]){this.handleLogoUpload(e.target.files[0]);}});}return logoFileInput;}setupLogoUploadEvents(){const uploadArea=document.querySelector('.upload-area');const handleUploadClick=(e)=>{e.stopPropagation();const activeUploadBtn=document.querySelector('.btn-upload.active');if(!activeUploadBtn)return;const activeUploadType=activeUploadBtn.textContent.includes('Upload File')? 'file':'url';if(activeUploadType==='file'){const logoFileInput=this.ensureLogoFileInput();logoFileInput.click();}else{this.showUrlInput();}};uploadArea.addEventListener('click',handleUploadClick);this.uploadClickHandler=handleUploadClick;}reattachUploadEvents(){const uploadArea=document.querySelector('.upload-area');if(uploadArea && this.uploadClickHandler){uploadArea.removeEventListener('click',this.uploadClickHandler);uploadArea.addEventListener('click',this.uploadClickHandler);}}toggleUploadMethod(type){const uploadArea=document.querySelector('.upload-area');if(type==='file'){uploadArea.innerHTML=` <div class="upload-placeholder"> <div class="upload-icon">üìÅ</div> <p>Click to select image</p> <small>Supported:JPG,PNG,GIF,WebP</small> </div> `;}else{uploadArea.innerHTML=` <div class="upload-placeholder"> <div class="upload-icon">üîó</div> <p>Click to enter image URL</p> <small>Enter direct link to image</small> </div> `;}}showUrlInput(){const exampleUrls=[ 'https:'https:'https:];const randomExample=exampleUrls[Math.floor(Math.random()* exampleUrls.length)];const url=prompt('Enter image URL:\n\n' + 'Suggest this link:\n' + '‚Ä¢ imgur.com(i.imgur.com/xxx.png)\n' + '‚Ä¢ postimg.cc(i.postimg.cc/xxx.jpg)\n' + '‚Ä¢ GitHub raw files\n' + '‚Ä¢ Or website support CORS\n\n' + 'Example:',randomExample);if(url && this.isValidUrl(url)){const imageExtensions=['.jpg','.jpeg','.png','.gif','.webp','.bmp','.svg'];const hasImageExtension=imageExtensions.some(ext=> url.toLowerCase().includes(ext));if(!hasImageExtension){const proceed=confirm('URL ‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û(.jpg,.png,etc.)\n' + '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');if(!proceed)return;}this.handleLogoUrl(url);}else if(url){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á\n\n‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:\n' + randomExample);}}isValidUrl(string){try{new URL(string);return true;}catch(_){return false;}}handleLogoUrl(url){const uploadArea=document.querySelector('.upload-area');uploadArea.innerHTML=` <div class="upload-placeholder"> <div class="upload-icon">‚è≥</div> <p>Loading image...</p> <small>Please wait</small> </div> `;this.tryLoadImageFromUrl(url).then((imageData)=>{this.logoImage=imageData;uploadArea.innerHTML=` <img src="${this.logoImage}" alt="Logo" style="max-width:100px;max-height:100px;border-radius:8px;"> <p>Logo loaded successfully!</p> <small>Click to change image</small> `;this.reattachUploadEvents();if(document.getElementById('show-logo').checked){this.generateQR();}}).catch((error)=>{console.error('Error loading image:',error);this.toggleUploadMethod('url');let errorMessage='‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ ';if(error.message.includes('CORS')){errorMessage +='‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å\n\n‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:\n‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏à‡∏≤‡∏Å imgur.com,i.postimg.cc ‡∏´‡∏£‡∏∑‡∏≠ GitHub\n‚Ä¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ "Upload File" ‡πÅ‡∏ó‡∏ô';}else if(error.message.includes('Network')){errorMessage +='‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:\n‚Ä¢ URL ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n‚Ä¢ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà';}else if(error.message.includes('Format')){errorMessage +='‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û\n‚Ä¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ .jpg,.png,.gif ‡∏´‡∏£‡∏∑‡∏≠ .webp';}else{errorMessage +='‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏≠‡∏∑‡πà‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏°‡∏≤‡πÉ‡∏ä‡πâ "Upload File" ‡πÅ‡∏ó‡∏ô';}alert(errorMessage);});}async tryLoadImageFromUrl(url){try{const imageData=await this.loadImageDirect(url);return imageData;}catch(error){console.log('Direct load failed,trying proxy method...');}const proxyUrls=[ `https:`https:`https:];for(const proxyUrl of proxyUrls){try{const imageData=await this.loadImageDirect(proxyUrl);return imageData;}catch(error){console.log(`Proxy ${proxyUrl}failed:`,error.message);continue;}}try{const response=await fetch(url,{mode:'no-cors'});if(response.ok){const blob=await response.blob();return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=()=> resolve(reader.result);reader.onerror=()=> reject(new Error('Failed to read blob'));reader.readAsDataURL(blob);});}}catch(error){console.log('Fetch method failed:',error.message);}throw new Error('CORS:‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å URL ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ');}loadImageDirect(url){return new Promise((resolve,reject)=>{const img=new Image();img.crossOrigin='anonymous';img.onload=()=>{try{if(img.width===0 || img.height===0){reject(new Error('Format:‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'));return;}const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');const maxSize=800;let{width,height}=img;if(width > maxSize || height > maxSize){const ratio=Math.min(maxSize / width,maxSize / height);width *=ratio;height *=ratio;}canvas.width=width;canvas.height=height;ctx.drawImage(img,0,0,width,height);const dataUrl=canvas.toDataURL('image/png',0.8);resolve(dataUrl);}catch(error){reject(new Error('CORS:‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ'));}};img.onerror=(error)=>{if(url.includes('cors')|| url.includes('proxy')){reject(new Error('Network:‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ'));}else{reject(new Error('CORS:‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û'));}};setTimeout(()=>{reject(new Error('Network:‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ'));},10000);img.src=url;});}handleLogoUpload(file){if(!file.type.startsWith('image/')){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô');return;}const reader=new FileReader();reader.onload=(e)=>{this.logoImage=e.target.result;const uploadArea=document.querySelector('.upload-area');uploadArea.innerHTML=` <img src="${e.target.result}" alt="Logo" style="max-width:100px;max-height:100px;border-radius:8px;"> <p>Logo uploaded successfully!</p> <small>Click to change image</small> `;this.reattachUploadEvents();if(document.getElementById('show-logo').checked){this.generateQR();}};reader.onerror=()=>{alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå');};reader.readAsDataURL(file);}async downloadQR(){if(!this.qrCodeInstance){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code ‡∏Å‡πà‡∏≠‡∏ô');return;}try{await this.incrementDownloadCount();const fileExtension=this.currentFormat==='jpeg' ? 'jpg':this.currentFormat;const fileName=`qrcode-${this.currentSize}x${this.currentSize}-${Math.floor(Date.now()/ 1000)}.${fileExtension}`;this.qrCodeInstance.update({width:this.currentSize,height:this.currentSize});this.qrCodeInstance.download({name:fileName.replace(`.${fileExtension}`,''),extension:fileExtension});setTimeout(()=>{this.qrCodeInstance.update({width:300,height:300});},1000);}catch(error){console.error('Error downloading QR code:',error);alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î');}}showFullscreen(){const qrContainer=document.getElementById('qr-code');const canvas=qrContainer.querySelector('canvas');if(!canvas)return;const modal=document.createElement('div');modal.style.cssText=` position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:1000;cursor:pointer;display:flex;flex-direction:column;`;const displayImg=document.createElement('img');displayImg.src=canvas.toDataURL();displayImg.style.cssText=` max-width:90vw;max-height:90vh;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,0.5);`;modal.appendChild(displayImg);const textHin=document.createElement('p');textHin.style.cssText='text-align:center;color:#fff;margin-top:16px;font-size:14px;';textHin.innerText='Click background or press Esc to close';modal.appendChild(textHin);document.body.appendChild(modal);modal.addEventListener('click',()=>{document.body.removeChild(modal);});const handleEscape=(e)=>{if(e.key==='Escape'){document.body.removeChild(modal);document.removeEventListener('keydown',handleEscape);}};document.addEventListener('keydown',handleEscape);}}document.addEventListener('DOMContentLoaded',()=>{const checkAndInit=()=>{if(typeof QRCodeStyling !=='undefined'){new QRCodeGenerator();}else{setTimeout(checkAndInit,100);}};checkAndInit();});document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('button').forEach(btn=>{btn.addEventListener('mouseenter',function(){this.style.transform='translateY(-1px)';});btn.addEventListener('mouseleave',function(){this.style.transform='translateY(0)';});});document.documentElement.style.scrollBehavior='smooth';});if('ontouchstart' in window){document.body.classList.add('touch-device');document.addEventListener('touchstart',(e)=>{if(e.target.matches('button,.btn-option,.btn-size')){e.target.style.transform='scale(0.95)';}});document.addEventListener('touchend',(e)=>{if(e.target.matches('button,.btn-option,.btn-size')){setTimeout(()=>{e.target.style.transform='';},150);}});}if(!CanvasRenderingContext2D.prototype.roundRect){CanvasRenderingContext2D.prototype.roundRect=function(x,y,width,height,radius){this.beginPath();this.moveTo(x + radius,y);this.lineTo(x + width - radius,y);this.quadraticCurveTo(x + width,y,x + width,y + radius);this.lineTo(x + width,y + height - radius);this.quadraticCurveTo(x + width,y + height,x + width - radius,y + height);this.lineTo(x + radius,y + height);this.quadraticCurveTo(x,y + height,x,y + height - radius);this.lineTo(x,y + radius);this.quadraticCurveTo(x,y,x + radius,y);this.closePath();};}
